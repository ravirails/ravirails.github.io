<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mistakes that every Rails Developer Must Avoid</title>
    <meta name="description" content="Since it's start Ruby on Rails is considered as one of the most productive web development framework. It makes development very fast and make this like a fun. That's why this getting more populer among web developers. But when it comes to performance and best practices few developer missed the most important tricks and that raise some concerns. In this blog I am going to share couple of things that you must notice if you are a Rails developer.">
    <meta name="keywords" content="Ruby on Rails, Ruby on Rails best practices, Mistakes that every rails developer avoid">
    <meta name="twitter:site_name" content="APPSIMPACT Academy">
    <meta name="twitter:site" content="APPSIMPACT Academy">
    <meta name="twitter:card" content="Mistakes that every Rails Developer Must Avoid">
    <meta name="twitter:description" content="Since it's start Ruby on Rails is considered as one of the most productive web development framework. It makes development very fast and make this like a fun. That's why this getting more populer among web developers. But when it comes to performance and best practices few developer missed the most important tricks and that raise some concerns. In this blog I am going to share couple of things that you must notice if you are a Rails developer.">
    <meta name="twitter:image" content="https://appsimpact-academy.s3.us-east-2.amazonaws.com/j0xyb0p8bo1mvwwt6v1khuscig0s?response-content-disposition=inline%3B%20filename%3D%22How-to-add-bootstrap-4-to-your-Rails-6-application.png%22%3B%20filename%2A%3DUTF-8%27%27How-to-add-bootstrap-4-to-your-Rails-6-application.png&amp;response-content-type=image%2Fpng&amp;X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIATUMRTR7EGHSSOYXU%2F20210516%2Fus-east-2%2Fs3%2Faws4_request&amp;X-Amz-Date=20210516T174839Z&amp;X-Amz-Expires=300&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Signature=c7052e0e8efc9e649acf73fafefa85f089e7b1c1897b703bcd165c91b0e352b2">
    <meta property="og:url" content="https://ai-academy.herokuapp.com/blogs/how-to-add-bootstrap-4-to-your-rails-6-application">
    <meta property="og:site_name" content="AI - Academy">
    <meta property="og:title" content="Mistakes that every Rails Developer Must Avoid">
    <meta property="og:image" content="https://appsimpact-academy.s3.us-east-2.amazonaws.com/j0xyb0p8bo1mvwwt6v1khuscig0s?response-content-disposition=inline%3B%20filename%3D%22How-to-add-bootstrap-4-to-your-Rails-6-application.png%22%3B%20filename%2A%3DUTF-8%27%27How-to-add-bootstrap-4-to-your-Rails-6-application.png&amp;response-content-type=image%2Fpng&amp;X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIATUMRTR7EGHSSOYXU%2F20210516%2Fus-east-2%2Fs3%2Faws4_request&amp;X-Amz-Date=20210516T174839Z&amp;X-Amz-Expires=300&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Signature=c7052e0e8efc9e649acf73fafefa85f089e7b1c1897b703bcd165c91b0e352b2">
    <meta property="og:description" content="Since it's start Ruby on Rails is considered as one of the most productive web development framework. It makes development very fast and make this like a fun. That's why this getting more populer among web developers. But when it comes to performance and best practices few developer missed the most important tricks and that raise some concerns. In this blog I am going to share couple of things that you must notice if you are a Rails developer.">
    <meta property="og:keywords" content="rails 6 and twitter bootstrap">
    <meta property="og:keywords" content="twitter bootstrap using webpacker">
    <meta property="og:keywords" content="twitter bootstrap in rails 6 using webpacker">
    <meta property="og:type" content="website">
    <meta name="image" content="https://appsimpact-academy.s3.us-east-2.amazonaws.com/j0xyb0p8bo1mvwwt6v1khuscig0s?response-content-disposition=inline%3B%20filename%3D%22How-to-add-bootstrap-4-to-your-Rails-6-application.png%22%3B%20filename%2A%3DUTF-8%27%27How-to-add-bootstrap-4-to-your-Rails-6-application.png&amp;response-content-type=image%2Fpng&amp;X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIATUMRTR7EGHSSOYXU%2F20210516%2Fus-east-2%2Fs3%2Faws4_request&amp;X-Amz-Date=20210516T174839Z&amp;X-Amz-Expires=300&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Signature=c7052e0e8efc9e649acf73fafefa85f089e7b1c1897b703bcd165c91b0e352b2">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="plugins/prismjs/prism.css">
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-purple">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">APPSIMPACT Academy</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="ruby-questions.html">Ruby on Rails</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="reactjs-questions.html">React JS</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="work_samples.html">Work Samples</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <div class="row">
        <div class="col-lg-9 col-md-12 mx-lg-auto">
          <h1 class="display-6 mt-5 mb-5">Mistakes that every Rails Developer Must Avoid</h1>

          <div class="mt-4 mb-4">
            <img src="images/blogs/Blog-Post-Image-Coming-Soon.png" class="img-fluid">
          </div>

          <div class="article-content">
            <h1>Hello Folks!</h1>

            <p class="lead font-weight-400">Since it's start Ruby on Rails is considered as one of the most productive web development framework. It makes development very fast and make this like a fun. That's why this getting more populer among web developers. But when it comes to performance and best practices few developer missed the most important tricks and that raise some concerns. In this blog I am going to share couple of things that you must notice if you are a Rails developer.</p>

            <h2 class="font-weight-bold">
              1. Finding an object should handle the <code>not found exception</code>
            </h2>

            <div id="step-1" class="mt-3">
              <p class="lead font-weight-400 mb-4">For every rails developer, there is an easy way in controllers to write a method for finding an object like this:</p>
              <pre>
                <code class="language-ruby">
                  def find_some_object
                    @some_object = SomeObject.find(params[:id])
                  end
                </code>
              </pre>

              <p class="lead font-weight-400 mt-4">The simplest way of finding (or fetching an object from database) right? However this not a suggested way of writing this method. What happen if the object does not existed(there might be two reasons for it. Either the record has been deleted or not created so far) in the databse with the ID you are passing as params?</p>

              <p class="lead font-weight-400">This will simply break things. You will get an error for <span class="text-primary">"Completed 404 Not Found"</span>. With this error you can easly deal in development or test environment but this will be a very bad experience if your application running in production environment(live  mode) and customers are facing this. Instead they will prefer to redirect on some working page with a meaningful message like <span class="text-primary">"The resource you are looking for does not exist"</span>.</p>
              <p class="lead font-weight-400">How you will write such method? Is this HARD to wtite? No. Not at all. You just need to rescue from not found exception. Have a look on the method below:</p>
              <pre>
                <code class="language-ruby">
                  def find_some_object
                    @some_object = SomeObject.find(params[:id])
                  rescue ActiveRecord::RecordNotFound
                    redirect_to root_path, notice: "The resource you are looking for does not exist"
                  end
                </code>
              </pre>
              <p class="lead font-weight-400">You can do following for APIs by just changing the <code>redirect_to</code> line.</p>
              <pre>
                <code class="language-ruby">
                  def find_some_object
                    @some_object = SomeObject.find(params[:id])
                  rescue ActiveRecord::RecordNotFound
                    render json: { errors: "The resource you are looking for does not exist" }, status: :not_found
                  end
                </code>
              </pre>
            </div>

            <h2 class="font-weight-bold mt-3">
              2. Avoid loading all objects into database at once
            </h2>

            <div id="step-2" class="mt-3">
              <p class="lead font-weight-400">Consider the following method:</p>
              <pre>
                <code class="language-ruby">
                  def index
                    @some_objects = SomeObject.all
                  end
                </code>
              </pre>

              <p class="lead font-weight-400 mt-4">This method will instantiate all the objects of a model into database at once. And this is very inefficient practice in general as this create great memory consumption.</p>
              <p class="lead font-weight-400 mb-4">This will not raise any error but will be very important from performance point of view. The reason behind this is that initially when you start building an application, it exists in your local environment where you have very little data to test things. Like 100 records per resource normally. But when your application is production ready and customers start using this, thier might be huge amount of data in your database over the time. And then loading a model's instances into database at once your application will face some performance issue. So you have to right the method like this:</p>
              <pre>
                <code class="language-ruby">
                  def index
                    @some_objects = SomeObject.find_each
                  end
                </code>
              </pre>
              <p class="lead font-weight-400 mt-4"><code>find_each</code> is a batch processing method which allow you to work with the records in batches, thereby this greatly reduce the memory consumption.</p>
              <p class="lead font-weight-400"><code>find_each</code> method uses <code>find_in_batches</code> with a default batch size of 1000 records.</p>

              <h2 class="font-weight-bold mt-4">3. Avoid N+1 query problem</h2>
              <p class="lead font-weight-400 mb-4">This query problem take place when there are associations. Consider the following example:</p>

              <pre>
                <code class="language-ruby">
                  class Parent < ApplicationRecord
                    has_many :children
                  end

                  class Child < ApplicationRecord
                    belongs_to :parent
                  end
                </code>
              </pre>

              <p class="lead font-weight-400 mb-4">Now if you want to load parent records and want to use associated child instances for getting some information then you may write code something like this:</p>

              <pre>
                <code class="language-ruby">
                  parants = Parent.limit(10)

                  parents.each do |parent|
                    parent.children.each do |child|
                      puts child.name
                    end
                  end
                </code>
              </pre>

              <p class="lead font-weight-400 mt-4">The number of queries executed by this code will be 1(for loading 10 parent records) + N(number of children for each parent). <strong>N + 1</strong> queries in total.</p>

              <p class="lead font-weight-400 mb-4">But Rails has already provided solutions for avoiding such cases by using <strong>Eager Loading</strong>. By eager loading associations you can prevent N + 1 queries in your code. Look at the following snippet:</p>
              <pre>
                <code class="language-ruby">
                  parents = Parent.includes(:children).limit(10)

                  parents.each do |parent|
                    parent.children.each do |child|
                      puts child.name
                    end
                  end
                </code>
              </pre>

              <p class="lead font-weight-400 mt-4">This code will execute just 2 queries, as opposed to N + 1 queries in the previous case. 1 for loading 10 parent records and 1 for loading children of parent.</p>

              <h2 class="font-weight-bold mt-4">4. Avoid writing any secret information into code</h2>

              <p class="lead font-weight-400">Many of the rails applications use the secret credentials like third party API keys(like Stripe, Google APIs, Sendgrid, Twilio, etc), tokens, server secrets like AWS, and many more. And you must prevent yourself by providing these kind of information directly into your code. Even if you are just doing testing and planning for removing this from code later. Don't do this.</p>

              <p class="lead font-weight-400">There are various gems(like <code>figaro</code>, <code>dot-env</code>) which provides you the facility to store your secret variables or any other sensitive information as environment(ENV) variables. With the rails versions after <code>rails 5.2</code> or higher you can store your secrets into <code>config/credentials.yml.ync</code> user a <code>config/master.key</code>. </p>

              <p class="lead font-weight-400">More important is once you separate your secrets into a secific file(mostly <code>application.yml</code>, <code>.env</code>, <code>secrets.yml</code>, <code>config/master.key</code>) then add these files into applications <code>.gitignore</code> file. </p>

              <h2 class="font-weight-bold mt-4">Conclusion</h2>
              <p class="lead font-weight-400">These are some common practices and also very important when show your work to your clients as code samples. So keep following these practices. Because some clients/recruiters have great technical knowledge indepth and they can raise concern on bad practices.</p>

            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="blog-footer mt-5">
      <p>APPSIMPACT Academy@2021</p>
      <p>
        <a href="#">Back to top</a>
      </p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>
    <script src="plugins/prismjs/prism.js"></script>
  </body>
</html>
